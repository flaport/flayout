---

title: GUI


keywords: fastai
sidebar: home_sidebar

summary: "An example KLayout-base GUI"
description: "An example KLayout-base GUI"
nb_path: "source/50_gui.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: source/50_gui.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_markdown rendered_html output_subarea ">
<h4 id="instance object at 0x7eff64870310>" class="doc_header"><code>instance object at 0x7eff64870310></code><a href="" class="source_link" style="float:right">[source]</a></h4>
<blockquote>
<p><code>instance object at 0x7eff64870310&gt;</code>(<strong><code>name</code></strong>:<code>str</code>=<em><code>'instance'</code></em>, <strong><code>width</code></strong>:<code>float</code>=<em><code>1.0</code></em>, <strong><code>height</code></strong>:<code>float</code>=<em><code>1.0</code></em>, <strong><code>num_inputs</code></strong>:<code>int</code>=<em><code>3</code></em>, <strong><code>num_outputs</code></strong>:<code>int</code>=<em><code>1</code></em>, <strong><code>port_size</code></strong>:<code>float</code>=<em><code>0.1</code></em>)</p>
</blockquote>
<pre><code>a instance PCell.
</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">instance</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result"><!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Bokeh Application</title>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-2.4.3.min.js"></script>
    <script type="text/javascript">
        Bokeh.set_log_level("info");
    </script>
  </head>
  <body>
    <div class="bk-root" id="a9d76084-0e5f-488a-823a-2ede22ea00ed" data-root-id="1004"></div>
  
    <script type="application/json" id="1239">
      {"edeedd29-c4b0-400b-99e7-47ea1826bfac":{"defs":[],"roots":{"references":[{"attributes":{},"id":"1069","type":"UnionRenderers"},{"attributes":{"source":{"id":"1027"}},"id":"1030","type":"CDSView"},{"attributes":{},"id":"1070","type":"Selection"},{"attributes":{"fill_alpha":{"value":0.3},"fill_color":{"value":"#0000ff"},"line_color":{"value":"#0000ff"},"xs":{"field":"xs"},"ys":{"field":"ys"}},"id":"1028","type":"MultiPolygons"},{"attributes":{"source":{"id":"1043"}},"id":"1046","type":"CDSView"},{"attributes":{"axis":{"id":"1013"},"coordinates":null,"group":null,"ticker":null},"id":"1016","type":"Grid"},{"attributes":{},"id":"1065","type":"UnionRenderers"},{"attributes":{"active_scroll":{"id":"1003"},"tools":[{"id":"1002"},{"id":"1003"}]},"id":"1021","type":"Toolbar"},{"attributes":{},"id":"1066","type":"Selection"},{"attributes":{},"id":"1003","type":"WheelZoomTool"},{"attributes":{},"id":"1002","type":"PanTool"},{"attributes":{"coordinates":null,"data_source":{"id":"1043"},"glyph":{"id":"1044"},"group":null,"hover_glyph":null,"view":{"id":"1046"}},"id":"1045","type":"GlyphRenderer"},{"attributes":{"fill_alpha":{"value":0.3},"fill_color":{"value":"#0000ff"},"line_color":{"value":"#0000ff"},"xs":{"field":"xs"},"ys":{"field":"ys"}},"id":"1044","type":"MultiPolygons"},{"attributes":{},"id":"1018","type":"BasicTicker"},{"attributes":{"data":{"xs":[[[{"__ndarray__":"AAAAAAAA4L8AAAAAAADgvwAAAAAAAOA/AAAAAAAA4D8=","dtype":"float64","order":"little","shape":[4]}]]],"ys":[[[{"__ndarray__":"AAAAAAAA4L8AAAAAAADgPwAAAAAAAOA/AAAAAAAA4L8=","dtype":"float64","order":"little","shape":[4]}]]]},"selected":{"id":"1066"},"selection_policy":{"id":"1065"}},"id":"1027","type":"ColumnDataSource"},{"attributes":{},"id":"1011","type":"LinearScale"},{"attributes":{"coordinates":null,"formatter":{"id":"1063"},"group":null,"major_label_policy":{"id":"1064"},"ticker":{"id":"1014"}},"id":"1013","type":"LinearAxis"},{"attributes":{"coordinates":null,"formatter":{"id":"1060"},"group":null,"major_label_policy":{"id":"1061"},"ticker":{"id":"1018"}},"id":"1017","type":"LinearAxis"},{"attributes":{"data":{"xs":[[[{"__ndarray__":"mpmZmZmZ4b+amZmZmZnhv83MzMzMzNy/zczMzMzM3L8=","dtype":"float64","order":"little","shape":[4]}]],[[{"__ndarray__":"mpmZmZmZ4b+amZmZmZnhv83MzMzMzNy/zczMzMzM3L8=","dtype":"float64","order":"little","shape":[4]}]],[[{"__ndarray__":"mpmZmZmZ4b+amZmZmZnhv83MzMzMzNy/zczMzMzM3L8=","dtype":"float64","order":"little","shape":[4]}]],[[{"__ndarray__":"zczMzMzM3D/NzMzMzMzcP5qZmZmZmeE/mpmZmZmZ4T8=","dtype":"float64","order":"little","shape":[4]}]],[[{"__ndarray__":"zczMzMzM3D/NzMzMzMzcP5qZmZmZmeE/mpmZmZmZ4T8=","dtype":"float64","order":"little","shape":[4]}]],[[{"__ndarray__":"zczMzMzM3D/NzMzMzMzcP5qZmZmZmeE/mpmZmZmZ4T8=","dtype":"float64","order":"little","shape":[4]}]]],"ys":[[[{"__ndarray__":"MzMzMzMz07+amZmZmZnJv5qZmZmZmcm/MzMzMzMz078=","dtype":"float64","order":"little","shape":[4]}]],[[{"__ndarray__":"mpmZmZmZqb+amZmZmZmpP5qZmZmZmak/mpmZmZmZqb8=","dtype":"float64","order":"little","shape":[4]}]],[[{"__ndarray__":"mpmZmZmZyT8zMzMzMzPTPzMzMzMzM9M/mpmZmZmZyT8=","dtype":"float64","order":"little","shape":[4]}]],[[{"__ndarray__":"MzMzMzMz07+amZmZmZnJv5qZmZmZmcm/MzMzMzMz078=","dtype":"float64","order":"little","shape":[4]}]],[[{"__ndarray__":"mpmZmZmZqb+amZmZmZmpP5qZmZmZmak/mpmZmZmZqb8=","dtype":"float64","order":"little","shape":[4]}]],[[{"__ndarray__":"mpmZmZmZyT8zMzMzMzPTPzMzMzMzM9M/mpmZmZmZyT8=","dtype":"float64","order":"little","shape":[4]}]]]},"selected":{"id":"1068"},"selection_policy":{"id":"1067"}},"id":"1043","type":"ColumnDataSource"},{"attributes":{"coordinates":null,"data_source":{"id":"1053"},"glyph":{"id":"1054"},"group":null,"hover_glyph":null,"view":{"id":"1056"}},"id":"1055","type":"GlyphRenderer"},{"attributes":{"fill_alpha":{"value":0.0},"fill_color":{"value":"#000000"},"line_color":{"value":"#00FF00"},"xs":{"field":"xs"},"ys":{"field":"ys"}},"id":"1054","type":"MultiPolygons"},{"attributes":{"end":1.2,"start":-1.2},"id":"1052","type":"Range1d"},{"attributes":{"end":1.2,"start":-1.2},"id":"1051","type":"Range1d"},{"attributes":{},"id":"1067","type":"UnionRenderers"},{"attributes":{"below":[{"id":"1013"}],"center":[{"id":"1016"},{"id":"1020"}],"height":500,"left":[{"id":"1017"}],"match_aspect":true,"renderers":[{"id":"1029"},{"id":"1045"},{"id":"1055"}],"title":{"id":"1057"},"toolbar":{"id":"1021"},"toolbar_location":null,"width":500,"x_range":{"id":"1051"},"x_scale":{"id":"1009"},"y_range":{"id":"1052"},"y_scale":{"id":"1011"}},"id":"1004","subtype":"Figure","type":"Plot"},{"attributes":{},"id":"1009","type":"LinearScale"},{"attributes":{},"id":"1068","type":"Selection"},{"attributes":{},"id":"1014","type":"BasicTicker"},{"attributes":{},"id":"1060","type":"BasicTickFormatter"},{"attributes":{"axis":{"id":"1017"},"coordinates":null,"dimension":1,"group":null,"ticker":null},"id":"1020","type":"Grid"},{"attributes":{"source":{"id":"1053"}},"id":"1056","type":"CDSView"},{"attributes":{},"id":"1061","type":"AllLabels"},{"attributes":{"data":{"xs":[[[{"__ndarray__":"mpmZmZmZ4b+amZmZmZnhv5qZmZmZmeE/mpmZmZmZ4T8=","dtype":"float64","order":"little","shape":[4]}]]],"ys":[[[{"__ndarray__":"AAAAAAAA4L8AAAAAAADgPwAAAAAAAOA/AAAAAAAA4L8=","dtype":"float64","order":"little","shape":[4]}]]]},"selected":{"id":"1070"},"selection_policy":{"id":"1069"}},"id":"1053","type":"ColumnDataSource"},{"attributes":{},"id":"1063","type":"BasicTickFormatter"},{"attributes":{"coordinates":null,"group":null},"id":"1057","type":"Title"},{"attributes":{"coordinates":null,"data_source":{"id":"1027"},"glyph":{"id":"1028"},"group":null,"hover_glyph":null,"view":{"id":"1030"}},"id":"1029","type":"GlyphRenderer"},{"attributes":{},"id":"1064","type":"AllLabels"}],"root_ids":["1004"]},"title":"Bokeh Application","version":"2.4.3"}}
    </script>
    <script type="text/javascript">
      (function() {
        const fn = function() {
          Bokeh.safely(function() {
            (function(root) {
              function embed_document(root) {
              const docs_json = document.getElementById('1239').textContent;
              const render_items = [{"docid":"edeedd29-c4b0-400b-99e7-47ea1826bfac","root_ids":["1004"],"roots":{"1004":"a9d76084-0e5f-488a-823a-2ede22ea00ed"}}];
              root.Bokeh.embed.embed_items(docs_json, render_items);
              }
              if (root.Bokeh !== undefined) {
                embed_document(root);
              } else {
                let attempts = 0;
                const timer = setInterval(function(root) {
                  if (root.Bokeh !== undefined) {
                    clearInterval(timer);
                    embed_document(root);
                  } else {
                    attempts++;
                    if (attempts > 100) {
                      clearInterval(timer);
                      console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
                    }
                  }
                }, 10, root)
              }
            })(window);
          });
        };
        if (document.readyState != "loading") fn();
        else document.addEventListener("DOMContentLoaded", fn);
      })();
    </script>
  </body>
</html></div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nd">@fl</span><span class="o">.</span><span class="n">pcell</span>
<span class="k">def</span> <span class="nf">connection</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;connection&quot;</span><span class="p">,</span>
    <span class="nb">input</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">output</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="p">):</span>
    <span class="n">rect</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([(</span><span class="o">-</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">)])</span>
    <span class="n">port</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([(</span><span class="o">-</span><span class="n">port_size</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="n">port_size</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="n">port_size</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="n">port_size</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="n">port_size</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">port_size</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="n">port_size</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">port_size</span><span class="o">/</span><span class="mi">2</span><span class="p">)])</span>
    <span class="n">input_ports</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">port</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">num_inputs</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">])])</span>
    <span class="n">output_ports</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">port</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">num_outputs</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">])])</span>
    
    
    <span class="n">cell</span> <span class="o">=</span> <span class="n">fl</span><span class="o">.</span><span class="n">cell</span><span class="p">(</span>
        <span class="n">name</span><span class="p">,</span> 
        <span class="n">shapes</span><span class="o">=</span><span class="p">{</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span> <span class="p">[</span><span class="n">rect</span><span class="p">],</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span> <span class="p">[</span><span class="o">*</span><span class="n">input_ports</span><span class="p">,</span> <span class="o">*</span><span class="n">output_ports</span><span class="p">],</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">cell</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">example_lib</span> <span class="o">=</span> <span class="n">fl</span><span class="o">.</span><span class="n">library</span><span class="p">(</span>
    <span class="s2">&quot;F. E. L.&quot;</span><span class="p">,</span>
    <span class="n">pcells</span><span class="o">=</span><span class="p">[</span><span class="n">instance</span><span class="p">],</span>
    <span class="n">cells</span><span class="o">=</span><span class="p">[],</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;FLayout Example Library&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>


